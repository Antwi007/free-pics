{
    "Resources": {
        "OpenAPI": {
            "Type": "AWS::ApiGateway::RestApi",
            "Properties": {
                "Description": "This is a description",
                "Name": "TestAPI",
                "Body": {
                    "openapi": "3.0.1",
                    "info": {
                        "title": "AI Photo Search-2",
                        "description": "AI Photo Search application, built during the Cloud and Big Data course at Columbia University.",
                        "version": "1.0.0"
                    },
                    "paths": {
                        "/upload/{bucket}/{filename}": {
                            "put": {
                                "parameters": [
                                    {
                                        "name": "filename",
                                        "in": "path",
                                        "required": true,
                                        "schema": {
                                            "type": "string"
                                        }
                                    },
                                    {
                                        "name": "bucket",
                                        "in": "path",
                                        "required": true,
                                        "schema": {
                                            "type": "string"
                                        }
                                    }
                                ],
                                "responses": {
                                    "400": {
                                        "description": "400 response",
                                        "headers": {
                                            "Access-Control-Allow-Origin": {
                                                "schema": {
                                                    "type": "string"
                                                }
                                            },
                                            "Access-Control-Allow-Methods": {
                                                "schema": {
                                                    "type": "string"
                                                }
                                            },
                                            "Access-Control-Allow-Credentials": {
                                                "schema": {
                                                    "type": "string"
                                                }
                                            },
                                            "Access-Control-Allow-Headers": {
                                                "schema": {
                                                    "type": "string"
                                                }
                                            }
                                        },
                                        "content": {}
                                    },
                                    "500": {
                                        "description": "500 response",
                                        "headers": {
                                            "Access-Control-Allow-Origin": {
                                                "schema": {
                                                    "type": "string"
                                                }
                                            },
                                            "Access-Control-Allow-Methods": {
                                                "schema": {
                                                    "type": "string"
                                                }
                                            },
                                            "Access-Control-Allow-Credentials": {
                                                "schema": {
                                                    "type": "string"
                                                }
                                            },
                                            "Access-Control-Allow-Headers": {
                                                "schema": {
                                                    "type": "string"
                                                }
                                            }
                                        },
                                        "content": {}
                                    },
                                    "200": {
                                        "description": "200 response",
                                        "headers": {
                                            "Access-Control-Allow-Origin": {
                                                "schema": {
                                                    "type": "string"
                                                }
                                            },
                                            "Access-Control-Allow-Methods": {
                                                "schema": {
                                                    "type": "string"
                                                }
                                            },
                                            "Access-Control-Allow-Credentials": {
                                                "schema": {
                                                    "type": "string"
                                                }
                                            },
                                            "Access-Control-Allow-Headers": {
                                                "schema": {
                                                    "type": "string"
                                                }
                                            }
                                        },
                                        "content": {
                                            "application/json": {
                                                "schema": {
                                                    "$ref": "#/components/schemas/Photo"
                                                }
                                            }
                                        }
                                    }
                                }
                            },
                            "options": {
                                "parameters": [
                                    {
                                        "name": "bucket",
                                        "in": "path",
                                        "required": true,
                                        "schema": {
                                            "type": "string"
                                        }
                                    },
                                    {
                                        "name": "filename",
                                        "in": "path",
                                        "required": true,
                                        "schema": {
                                            "type": "string"
                                        }
                                    }
                                ],
                                "responses": {
                                    "200": {
                                        "description": "200 response",
                                        "headers": {
                                            "Access-Control-Allow-Origin": {
                                                "schema": {
                                                    "type": "string"
                                                }
                                            },
                                            "Access-Control-Allow-Methods": {
                                                "schema": {
                                                    "type": "string"
                                                }
                                            },
                                            "Access-Control-Allow-Credentials": {
                                                "schema": {
                                                    "type": "string"
                                                }
                                            },
                                            "Access-Control-Allow-Headers": {
                                                "schema": {
                                                    "type": "string"
                                                }
                                            }
                                        },
                                        "content": {
                                            "application/json": {
                                                "schema": {
                                                    "$ref": "#/components/schemas/Photo"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        "/search": {
                            "get": {
                                "operationId": "searchPhotos",
                                "parameters": [
                                    {
                                        "name": "user_message",
                                        "in": "query",
                                        "required": true,
                                        "schema": {
                                            "type": "string"
                                        }
                                    }
                                ],
                                "responses": {
                                    "500": {
                                        "description": "500 response",
                                        "headers": {
                                            "Access-Control-Allow-Origin": {
                                                "schema": {
                                                    "type": "string"
                                                }
                                            },
                                            "Access-Control-Allow-Methods": {
                                                "schema": {
                                                    "type": "string"
                                                }
                                            },
                                            "Access-Control-Allow-Credentials": {
                                                "schema": {
                                                    "type": "string"
                                                }
                                            },
                                            "Access-Control-Allow-Headers": {
                                                "schema": {
                                                    "type": "string"
                                                }
                                            }
                                        },
                                        "content": {
                                            "application/json": {
                                                "schema": {
                                                    "$ref": "#/components/schemas/Error"
                                                }
                                            }
                                        }
                                    },
                                    "200": {
                                        "description": "200 response",
                                        "headers": {
                                            "Access-Control-Allow-Origin": {
                                                "schema": {
                                                    "type": "string"
                                                }
                                            },
                                            "Access-Control-Allow-Methods": {
                                                "schema": {
                                                    "type": "string"
                                                }
                                            },
                                            "Access-Control-Allow-Credentials": {
                                                "schema": {
                                                    "type": "string"
                                                }
                                            },
                                            "Access-Control-Allow-Headers": {
                                                "schema": {
                                                    "type": "string"
                                                }
                                            }
                                        },
                                        "content": {
                                            "application/json": {
                                                "schema": {
                                                    "$ref": "#/components/schemas/SearchResponse"
                                                }
                                            }
                                        }
                                    },
                                    "403": {
                                        "description": "403 response",
                                        "headers": {
                                            "Access-Control-Allow-Origin": {
                                                "schema": {
                                                    "type": "string"
                                                }
                                            },
                                            "Access-Control-Allow-Methods": {
                                                "schema": {
                                                    "type": "string"
                                                }
                                            },
                                            "Access-Control-Allow-Credentials": {
                                                "schema": {
                                                    "type": "string"
                                                }
                                            },
                                            "Access-Control-Allow-Headers": {
                                                "schema": {
                                                    "type": "string"
                                                }
                                            }
                                        },
                                        "content": {
                                            "application/json": {
                                                "schema": {
                                                    "$ref": "#/components/schemas/Error"
                                                }
                                            }
                                        }
                                    }
                                }
                            },
                            "options": {
                                "responses": {
                                    "200": {
                                        "description": "200 response",
                                        "headers": {
                                            "Access-Control-Allow-Origin": {
                                                "schema": {
                                                    "type": "string"
                                                }
                                            },
                                            "Access-Control-Allow-Methods": {
                                                "schema": {
                                                    "type": "string"
                                                }
                                            },
                                            "Access-Control-Allow-Credentials": {
                                                "schema": {
                                                    "type": "string"
                                                }
                                            },
                                            "Access-Control-Allow-Headers": {
                                                "schema": {
                                                    "type": "string"
                                                }
                                            }
                                        },
                                        "content": {
                                            "application/json": {
                                                "schema": {
                                                    "$ref": "#/components/schemas/SearchResponse"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "components": {
                        "schemas": {
                            "Error": {
                                "type": "object",
                                "properties": {
                                    "code": {
                                        "type": "integer",
                                        "format": "int32"
                                    },
                                    "message": {
                                        "type": "string"
                                    }
                                }
                            },
                            "Photo": {
                                "type": "object",
                                "properties": {
                                    "url": {
                                        "type": "string"
                                    },
                                    "labels": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        }
                                    }
                                }
                            },
                            "SearchResponse": {
                                "type": "object",
                                "properties": {
                                    "results": {
                                        "type": "array",
                                        "items": {
                                            "$ref": "#/components/schemas/Photo"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}